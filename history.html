<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>History</title>

    <link rel="stylesheet" href="./css/font.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/history.css">

    <!-- Подключение стилей Pikaday -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/pikaday/css/pikaday.css">
</head>
<body>
    <div class="content">
        <!-- Сайдбар -->
        <div id="sidebar">
            <div id="sidebar-container">
                <div id="menu-header">
                    <img class="logo-icon" src="./imgs/logo.png" alt="Logo icon">
                </div>

                <!-- Actions -->
                <div class="menu-block">
                    <p class="title menu-title">Actions</p>

                    <div class="menu-point" onclick="switchMenuPoint(0)">
                        <img class="active-rectangle" src="./imgs/rectangle.png" alt="Rectangle icon" style="display: none;">
                        <div class="menu-text-point">
                            <img class="menu-icon" src="./imgs/menu-icons/menu0.png" alt="Menu icon">
                            <p class="link-large">Summarize</p>
                        </div>
                    </div>

                    <div class="menu-point active-menu-point" onclick="switchMenuPoint(1)">
                        <img class="active-rectangle" src="./imgs/rectangle.png" alt="Rectangle icon">
                        <div class="menu-text-point">
                            <img class="menu-icon" src="./imgs/menu-icons/active-menu1.png" alt="Menu icon">
                            <p class="link-large">History</p>
                        </div>
                    </div>

                    <div class="menu-point" onclick="switchMenuPoint(2)">
                        <img class="active-rectangle" src="./imgs/rectangle.png" alt="Rectangle icon" style="display: none;">
                        <div class="menu-text-point">
                            <img class="menu-icon" src="./imgs/menu-icons/menu2.png" alt="Menu icon">
                            <p class="link-large">Payment</p>
                        </div>
                    </div>

                    <div class="menu-point" onclick="switchMenuPoint(3)">
                        <img class="active-rectangle" src="./imgs/rectangle.png" alt="Rectangle icon" style="display: none;">
                        <div class="menu-text-point">
                            <img class="menu-icon" src="./imgs/menu-icons/menu3.png" alt="Menu icon">
                            <p class="link-large">My Plan</p>
                        </div>
                    </div>
                </div>

                <!-- Contacts -->
                <div class="menu-block">
                    <p class="title menu-title">Contacts</p>

                    <div id="community-menu-container">
                        <div class="menu-point" id="community-menu-point" onclick="switchMenuPoint(4)">
                            <img class="active-rectangle" src="./imgs/rectangle.png" alt="Rectangle icon" style="display: none;">
                            <div class="menu-text-point">
                                <img class="menu-icon" src="./imgs/menu-icons/menu4.png" alt="Menu icon">
                                <p class="link-large">Community</p>
                            </div>
                        </div>
                        <ul id="community-menu-ul" class="link-large dropdown-content"></ul>
                    </div>

                    <div class="menu-point">
                        <img class="active-rectangle" src="./imgs/rectangle.png" alt="Rectangle icon" style="display: none;">
                        <div class="menu-text-point">
                            <img class="menu-icon" src="./imgs/menu-icons/menu5.png" alt="Menu icon">
                            <p class="link-large">Support</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Account -->
            <div id="account-container">
                <hr>
                <div id="email-menu" style="display: none;">
                    <div id="email-menu-container" class="email_menu_text">
                        <a href="https://www.example.com">Privacy Policy</a>
                        <a href="https://www.example.com">Terms of Sevice</a>
                        <a id="logout-link" href="https://www.example.com">
                            <img class="logout-icon" src="./imgs/logout.png" alt="Logo icon">
                            <p>Log out</p>
                        </a>
                    </div>
                </div>
                <p class="small-menu-text" id="user-email" onclick="activateEmailMenu()">seo@contractcrab.com</p>
            </div>

        </div>
        
        <div id="history-container">
            <h1 id="history-header">History</h1>

            <div id="table-container">
                <div id="sorting-container">
                    <div id="filter-container">
                        <div id="filter-by-container">
                            <img id="filter-by-icon" src="./imgs/filter_list.png" alt="Filter icon">
                            <p class="link-large">Filter by</p>
                        </div>

                        <!-- Фильтрация по дате -->
                        <div id="date-filter" class="filter-items">
                            <p id="date-filter-text" class="link-large">Date</p>
                            <img id="close-date-filter" src="./imgs/filter-close.png" alt="Close icon" onclick="closeDateFilter()" style="display: none;">
                        </div>

                        <!-- Фильтрация по сторонам -->
                        <div id="side-filter" class="filter-items">
                            <p id="side-filter-text" class="link-large">Sides</p>
                            <img id="close-side-filter" src="./imgs/filter-close.png" alt="Close icon" onclick="closeSideFilter()" style="display: none;">
                        </div>

                        <!-- Фильтрация по типу контракта -->
                        <div id="type-filter" class="filter-items">
                            <p id="type-filter-text" class="link-large">Contract Types</p>
                            <img id="close-type-filter" src="./imgs/filter-close.png" alt="Close icon" onclick="closeTypeFilter()" style="display: none;">
                        </div>

                        <!-- Фильтрация по тегу -->
                        <div id="tag-filter" class="filter-items">
                            <p id="tag-filter-text" class="link-large">Tag</p>
                            <img id="close-tag-filter" src="./imgs/filter-close.png" alt="Close icon" onclick="closeTagFilter()" style="display: none;">
                        </div>
                    </div>

                    <div id="search-container">
                        <img id="search-icon" src="./imgs/search.png" alt="Search icon">
                        <input type="text" id="search-input" class="card-text" placeholder="Search">
                    </div>
                </div>

                <!-- Таблица -->
                <table id="history_table">
                    <thead>
                        <tr id="table-headers" class="bold-title">
                            <th id="requestDate-header" class="table-header sort sort-top" onclick="sortTable('requestDate')"><span>Request date</span></th>
                            <th id="side1-header" class="table-header sort" onclick="sortTable('side1')"><span>Side 1</span></th>
                            <th id="side2-header" class="table-header sort" onclick="sortTable('side2')"><span>Side 2</span></th>
                            <th id="contractType-header" class="table-header sort" onclick="sortTable('contractType')"><span>Contract</span></th>
                            <th id="tag-header" class="table-header sort" onclick="sortTable('tag')"><span>Tag</span></th>
                            <th id="actions-header"><span>Actions</span></th>
                        </tr>
                    </thead>
                    <tbody class="card-text" id="table-body">
                        <!-- Напонение таблицы -->
                    </tbody>
                </table>

            </div>
            
            <!-- Скрытое меню actions -->
            <div id="actions-menu" style="display: none;">
                <div class="action-menu-point actions_menu_text download-summary">
                    <img class="action-element download-summary" src="./imgs/download.png" alt="Download icon">
                    <p class="action-element download-summary">Download Summary</p>
                </div>
                <div class="action-menu-point actions_menu_text copy-to-clipboard">
                    <img class="action-element copy-to-clipboard" src="./imgs/content_copy.png" alt="Download icon">
                    <p class="action-element copy-to-clipboard">Copy to Clipboard</p>
                </div>
                <div class="action-menu-point actions_menu_text edit-tag">
                    <img class="action-element edit-tag" class="action-element" src="./imgs/shoppingmode.png" alt="Download icon">
                    <p class="action-element edit-tag">Edit tag</p>
                </div>
                <div class="action-menu-point actions_menu_text action-delete-text delete">
                    <img class="action-element delete" src="./imgs/delete.png" alt="Download icon">
                    <p class="action-element delete">Delete</p>
                </div>
            </div>

            <!-- Скрытое меню copy -->
            <div id="copy-menu" style="display: none;">
                <p id="copy" class="copy-menu-text">Copy</p>
                <p id="copy-all" class="copy-menu-text">Copy all</p>
            </div>

            <!-- Скрытое меню фильтра по дате -->
            <div id="request-date-menu" class="filter-menu" style="display: none;">
                <div class="filter-header">
                    <h2>Request Date</h2>
                    <img id="filter-close-icon" src="./imgs/filter-close.png" alt="Close icon" onclick="closeDateFilter()">
                </div>
                <hr>
                <div class="switch-btns-container">
                    <button class="filtr-btn-text active-switch-btn">Include</button>
                    <button class="filtr-btn-text">Exclude</button>
                </div>

                <div id="from-datepicker-container"></div>

                <div id="to-datepicker-container"></div>

                <button class="apply-filter-btn action-btn apply-filter-btn-text" onclick="filterRequestDate()">Apply</button>
            </div>

             <!-- Скрытое меню фильтра по стороне -->
             <div id="side-menu" class="filter-menu" style="display: none;">
                <div class="filter-header">
                    <h2>Side</h2>
                    <img id="filter-close-icon" src="./imgs/filter-close.png" alt="Close icon" onclick="closeSideFilter()">
                </div>
                <hr>
                <div class="switch-btns-container">
                    <button class="filtr-btn-text active-switch-btn">Include</button>
                    <button class="filtr-btn-text">Exclude</button>
                </div>

                <div class="search-filter-container">
                    <img class="search-icon" src="./imgs/search.png" alt="Search icon">
                    <input type="text" id="input-search-sides" class="search-filter-input card-text" placeholder="Search side">
                </div>

                <div class="side-filter-block">
                    <p class="bold-title side-header-filter">Side 1</p>
                    <ul id="side1-filter-ul"></ul>
                </div>

                <div class="side-filter-block">
                    <p class="bold-title side-header-filter">Side 2</p>
                    <ul id="side2-filter-ul"></ul>
                </div>

                <button class="apply-filter-btn action-btn apply-filter-btn-text" onclick="filterSides()">Apply</button>
            </div>

            <!-- Скрытое меню фильтра по типу -->
            <div id="type-menu" class="filter-menu" style="display: none;">
                <div class="filter-header">
                    <h2>Contract Type</h2>
                    <img id="filter-close-icon" src="./imgs/filter-close.png" alt="Close icon" onclick="closeTypeFilter()">
                </div>
                <hr>
                <div class="switch-btns-container">
                    <button class="filtr-btn-text active-switch-btn">Include</button>
                    <button class="filtr-btn-text">Exclude</button>
                </div>

                <div class="search-filter-container">
                    <img class="search-icon" src="./imgs/search.png" alt="Search icon">
                    <input type="text" id="input-search-type" class="search-filter-input card-text" placeholder="Search type">
                </div>

                <div class="type-filter-block">
                    <ul id="type-filter-ul"></ul>
                </div>

                <button id="apply-type-btn" class="apply-filter-btn action-btn apply-filter-btn-text" onclick="filterType()">Apply</button>
            </div>

            <!-- Скрытое меню фильтра по тегу -->
            <div id="tag-menu" class="filter-menu" style="display: none;">
                <div class="filter-header">
                    <h2>Tag</h2>
                    <img id="filter-close-icon" src="./imgs/filter-close.png" alt="Close icon" onclick="closeTagFilter()">
                </div>
                <hr>
                <div class="switch-btns-container">
                    <button class="filtr-btn-text active-switch-btn">Include</button>
                    <button class="filtr-btn-text">Exclude</button>
                </div>

                <div class="search-filter-container">
                    <img class="search-icon" src="./imgs/search.png" alt="Search icon">
                    <input type="text" id="input-search-tag" class="search-filter-input card-text" placeholder="Search tag">
                </div>

                <div class="tag-filter-block">
                    <ul id="tag-filter-ul"></ul>
                </div>

                <button id="apply-tag-btn" class="apply-filter-btn action-btn apply-filter-btn-text" onclick="filterTag()">Apply</button>
            </div>

            <!-- Если история пустая -->
            <div id="empty-history-container" style="display: none;">
                <img id="empty-history-icon" src="./imgs/history-empty.png" alt="Empty history icon">
                <div class="error-text">
                    <p>There is nothing here yet!</p>
                    <p>But since you start summarizing contracts they will appear in the History.</p>
                </div>
                <button class="link-small action-btn" id="empty-history-summ-contr-btn">Summarize contract</button>
            </div>
        </div>
    </div>
    <!-- Отладочная панель -->
    <footer style="position: fixed; bottom: 0; left: 0; width: 100%; padding: 10px 40px;">
        <button class="secondary-btn link-small" onclick="showEmptyHistory()">Empty history</button>
    </footer>
</body>

<!-- Подключение скрипта Pikaday -->
<script src="https://cdn.jsdelivr.net/npm/pikaday/pikaday.js"></script>

<script src="./scripts/history.js"></script>
<script src="./scripts/menu.js"></script>
</html>